I"¬<h3 id="introduction">Introduction</h3>

<p>This script creates an image gallery. The script reads all images from a specific (user-defined) folder in Jekyll, automagically crops them to 300px squares, using an image resize proxy service and shows them in rows of five.</p>

<style>
    .image-gallery {overflow: auto; margin-left: -1%!important;}
    .image-gallery li {float: left; display: block; margin: 0 0 1% 1%; width: 19%;}
    .image-gallery li a {text-align: center; text-decoration: none!important; color: #777;}
    .image-gallery li a span {display: block; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 3px 0;}
    .image-gallery li a img {width: 100%; display: block;}
</style>

<ul class="image-gallery"><li><a href="/uploads/album/Beautiful%20Mountains.jpg" title="Beautiful Mountains"><img src="//images.weserv.nl/?url=localhost:4000/uploads/album/Beautiful%20Mountains.jpg&amp;w=300&amp;h=300&amp;output=jpg&amp;q=50&amp;t=square" alt="Beautiful Mountains" title="Beautiful Mountains" /><span>Beautiful Mountains</span></a></li><li><a href="/uploads/album/Museum%20of%20Pop%20Culture.jpg" title="Museum of Pop Culture"><img src="//images.weserv.nl/?url=localhost:4000/uploads/album/Museum%20of%20Pop%20Culture.jpg&amp;w=300&amp;h=300&amp;output=jpg&amp;q=50&amp;t=square" alt="Museum of Pop Culture" title="Museum of Pop Culture" /><span>Museum of Pop Culture</span></a></li><li><a href="/uploads/album/Seattle%20View.jpg" title="Seattle View"><img src="//images.weserv.nl/?url=localhost:4000/uploads/album/Seattle%20View.jpg&amp;w=300&amp;h=300&amp;output=jpg&amp;q=50&amp;t=square" alt="Seattle View" title="Seattle View" /><span>Seattle View</span></a></li><li><a href="/uploads/album/Seattle%20by%20Night.jpg" title="Seattle by Night"><img src="//images.weserv.nl/?url=localhost:4000/uploads/album/Seattle%20by%20Night.jpg&amp;w=300&amp;h=300&amp;output=jpg&amp;q=50&amp;t=square" alt="Seattle by Night" title="Seattle by Night" /><span>Seattle by Night</span></a></li><li><a href="/uploads/album/Space%20Needle.jpg" title="Space Needle"><img src="//images.weserv.nl/?url=localhost:4000/uploads/album/Space%20Needle.jpg&amp;w=300&amp;h=300&amp;output=jpg&amp;q=50&amp;t=square" alt="Space Needle" title="Space Needle" /><span>Space Needle</span></a></li></ul>

<h3 id="how-it-works">How it works</h3>

<p>The script searches for any file with a path that contains the string given in â€˜folderâ€™ and checks whether it is a â€˜jpgâ€™ file. If so, it creates an image tag for the image. The source is a 300 pixel wide square cropped version of the image. Then the script wraps the image in a link, containing the full path to the image. This will trigger the lightbox if present.</p>

<p>[expand]</p>

<pre><code>&lt;style&gt;
  .image-gallery {overflow: auto; margin-left: -1%!important;}
  .image-gallery a {float: left; display: block; margin: 0 0 1% 1%; width: 19%; text-align: center; text-decoration: none!important;}
  .image-gallery a span {display: block; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 3px 0;}
  .image-gallery a img {width: 100%; display: block;}
&lt;/style&gt;

&lt;div class="image-gallery"&gt;
{% for file in site.static_files %}
  {% if file.path contains include.folder %}
    {% if file.extname == '.jpg' or 
      file.extname == '.jpeg' or 
      file.extname == '.JPG' or 
      file.extname == '.JPEG' %}

      {% assign filenameparts = file.path | split: "/" %}
      {% assign filename = filenameparts | last | replace: file.extname,"" %}

      &lt;a href="{{ file.path }}" title="{{ filename }}"&gt;
        &lt;img src="//images.weserv.nl/?url=jekyllcodex.org/{{ file.path }}&amp;w=300&amp;h=300&amp;output=jpg&amp;q=50&amp;t=square" alt="{{ filename }}" /&gt;
        &lt;span&gt;{{ filename }}&lt;/span&gt;
      &lt;/a&gt;
    {% endif %}
  {% endif %}
{% endfor %}
&lt;/div&gt;
</code></pre>

<p>Note that the images are being resized and served by <a href="https://images.weserv.nl">images.weserv.nl</a>.</p>

<p>[/expand]</p>

<h3 id="installation">Installation</h3>

<p>Step 1. Download the file <a href="https://raw.githubusercontent.com/jhvanderschee/jekyllcodex/gh-pages/_includes/image-gallery.html">image-gallery.html</a>
<br />Step 2. Save the file in the â€˜_includesâ€™ directory of your project
<br />Step 3. Add the following line to your layout on the place where you want the image gallery to appear:</p>

<pre><code>{% include image-gallery.html folder="/uploads/album" %}
</code></pre>
:ET